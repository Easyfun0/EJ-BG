---
layout: post
title:  "è®Šæ•¸"
date:   2023-03-08
author: Easyfun
categories: Rust
cover:  "/assets/cover-thumb.png"
---


## è®Šæ•¸èˆ‡å¯è®Šæ€§

Rustæ¨å‹•ä½ èƒ½å……åˆ†åˆ©ç”¨Rustæä¾›çš„å®‰å…¨æ€§å’Œç°¡æ˜“ä¸¦è¡Œæ€§ä¾†å¯«ç¨‹å¼çš„æ–¹æ³•ä¹‹ä¸€ã€‚

ç•¶ä¸€å€‹è®Šæ•¸æ˜¯ä¸å¯è®Šçš„ï¼Œåªè¦æœ‰æ•¸å€¼ç¶å®šåœ¨ä¸€å€‹åå­—ä¸Šï¼Œä½ å°±ç„¡æ³•æ”¹è®Šå…¶å€¼ã€‚


## è®Šæ•¸ç¶å®š

åœ¨Rustä¸­æˆ‘å€‘æœƒ:

let a = "hello" ï¼ŒåŒæ™‚ç¨±ä½œè®Šæ•¸ç¶å®š

## è®Šæ•¸å¯è®Šæ€§
{% highlight rust %}

fn main() {
    let x = 1;
    println!("The value of x is: {}", x);
    x = 2;
    println!("The value of x is: {}", x);
}

{% endhighlight %}

åŸ·è¡Œå¾Œ
```
error[E0384]: cannot assign twice to immutable variable `x`
 --> /Users/huangyingjie/Rprojects/new_demo/src/main.rs:4:5
  |
2 |     let x = 1;
  |         -
  |         |
  |         first assignment to `x`
  |         help: consider making this binding mutable: `mut x`
3 |     println!("The value of x is: {}", x);
4 |     x = 2;
  |     ^^^^^ cannot assign twice to immutable variable

error: aborting due to previous error
```

éŒ¯çš„åŸå› æ˜¯cannot assign twice to immutable x(ç„¡æ³•å°ä¸å¯è®Šçš„è®Šæ•¸é€²è¡Œé‡è¤‡è³¦å€¼)ï¼Œå› ç‚ºæˆ‘å€‘æƒ³å°ä¸å¯è®Šçš„xè®Šæ•¸å†æ¬¡è³¦å€¼ã€‚

åœ¨Rustä¸­ï¼Œå¯è®Šæ€§å¾ˆç°¡å–®ï¼Œåªè¦åœ¨è®Šæ•¸å‰åŠ ä¸€å€‹mutå°±å¯ã€‚

ç‚ºäº†è®“è®Šæ•¸ç‚ºå¯è®Šï¼Œå¯æ”¹ç‚º:

{% highlight Rust %}

fn main(){
  let mut x = 1;
  printl!("The value of x is: {}",x);
  x = 2;
  println!("The value of x is: {}", x);
}

{% endhighlight %}

```
:!'/var/folders/mg/1r752ql131v0n4nfn43j2xdc0000gn/T/nvim.huangyingjie/mKXpmr/1/main'
The value of x is: 1
The value of x is: 2
```
### ä½¿ç”¨ä¸‹åº•ç·šé–‹é ­å¿½ç•¥æœªä½¿ç”¨è®Šæ•¸

ç•¶ä½ å‰µå»ºäº†ä¸€å€‹è®Šæ•¸å»æœªä½¿ç”¨å®ƒï¼ŒRustæœƒçµ¦ä½ è­¦å‘Šã€‚ä½†æœ‰æ™‚å‰µå»ºä¸€å€‹ä¸æœƒè¢«ä½¿ç”¨çš„è®Šæ•¸æ˜¯æœ‰ç”¨çš„ï¼Œæ¯”å¦‚æ­£åœ¨è¨­è¨ˆä¸€å€‹åŸå½¢æˆ–å‰›é–‹å§‹ä¸€å€‹é …ç›®ã€‚é€™æ™‚ä½ å¸Œæœ›Rustä¸è¦è­¦å‘Šæœªä½¿ç”¨çš„è®Šæ•¸ï¼Œç‚ºæ­¤å¯ä»¥ç”¨ä¸‹åº•ç·šä½œç‚ºè®Šæ•¸çš„é–‹é ­:

{% highlight rust %}

fn main(){
  let _x = 1;
  let y = 2;
}

{% endhighlight %}

> cargo run
  warning: unused variable: `y`
   --> src/main.rs:3:9
    |
  3 |     let y = 2;
    |         ^ help: if this is intentional, prefix it with an underscore: `_y`
    |
    = note: `#[warn(unused_variables)]` on by default

### è®Šæ•¸è§£æ§‹

åœ¨Rust 1.59å¾Œï¼Œæˆ‘å€‘å¯åœ¨è³¦å€¼å¥çš„å·¦å¼ä¸­ä½¿ç”¨å…ƒçµ„,åˆ‡ç‰‡å’Œçµæ§‹é«”æ¨¡å¼ã€‚
{% highlight rust %}

struct Struct {
  e:i32
}
fn main(){
  let (a,b,c,d,e);

  (a, b) = (1, 2);
  [c, .., d, _] = [1, 2, 3, 4, 5];
  Struct {e, .. } = Struct {e: 5};

  assert_eq!([1, 2, 3, 4, 5], [a, b, c, d, e]);
}

{% endhighlight %}

é€™æ–¹æ³•è·Ÿä¹‹å‰çš„letä¿æŒäº†ä¸€è‡´æ€§ï¼Œä½†æ˜¯letæœƒé‡æ–°ç¶å®šï¼Œè€Œé€™è£¡åªæ˜¯å°ä¹‹å‰ç¶å®šçš„è®Šæ•¸é€²è¡Œå†è³¦å€¼ã€‚

éœ€æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ += çš„è³¦å€¼èªå¥é‚„ä¸æ”¯æŒè§£æ§‹å¼è³¦å€¼ã€‚

### è®Šæ•¸å’Œå¸¸æ•¸ä¹‹é–“çš„å·®ç•°

å¸¸æ•¸(constant) èˆ‡ä¸å¯è®Šæ•¸ä¸€æ¨£ï¼Œå¸¸æ•¸ä¹Ÿæ˜¯ç¶å®šåˆ°ä¸€å€‹å¸¸æ•¸åä¸”ä¸å…è¨±æ›´æ”¹çš„å€¼ï¼Œä½†æ˜¯å¸¸æ•¸å’Œè®Šæ•¸é‚„æ˜¯å­˜åœ¨ä¸€äº›å·®ç•°:




```
â”œâ”€â”€ .git
â”œâ”€â”€ .gitignore
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src
    â””â”€â”€ main.rs
```

## é‹è¡Œæ–¹å¼

æœ‰å…©ç¨®æ–¹å¼å¯ä»¥é‹è¡Œé …ç›®:

1.cargo run

2.æ‰‹å‹•ç·¨è­¯å’Œé‹è¡Œé …ç›®

runé‹è¡Œå¾Œ:
> cargo run

```
  Compiling new_demo v0.1.0 (/Users/huangyingjie/Rprojects/new_demo)

  Finished dev [unoptimized + debuginfo] target(s) in 2.62s

  Running `target/debug/new_demo`

Hello, world!
```

åœ¨é€™å€‹ç‹€æ…‹æ˜¯debugæ¨¡å¼ï¼Œä»£ç¢¼çš„ç·¨è­¯é€Ÿåº¦æœƒéå¸¸å¿«ï¼Œä½†é‹è¡Œçš„é€Ÿåº¦å°±æ…¢äº†ï¼Œåœ¨debugæ¨¡å¼ä¸‹ï¼ŒRustç·¨è­¯å™¨ä¸æœƒåšä»»ä½•çš„å„ªåŒ–ï¼Œè®“ä½ çš„é–‹ç™¼æµç¨‹æ›´åŠ é †æš¢ã€‚

é«˜æ€§èƒ½çš„æ–¹æ³•:

ğŸ”cargo run --release

ğŸ”cargo build --realease

### Cargo check

cargo checkæ˜¯æˆ‘å€‘åœ¨ç¨‹å¼ç¢¼é–‹ç™¼éç¨‹ä¸­æœ€å¸¸ç”¨æŒ‡ä»¤ï¼Œå®ƒå¯ä»¥å¿«é€Ÿçš„æª¢æŸ¥ä¸€ä¸‹ç¨‹å¼ç¢¼èƒ½å¦ç·¨è­¯é€šéã€‚å› æ­¤è©²
å‘½ä»¤é€Ÿåº¦æœƒéå¸¸å¿«ï¼Œèƒ½ç¯€çœå¤§é‡çš„ç·¨è­¯æ™‚é–“ã€‚

> cargo check

    Checking new_demo v0.1.0 (/Users/huangyingjie/Rprojects/new_demo)

    Finished dev [unoptimized + debuginfo] target(s) in 2.23s

### Cargo.toml å’Œ Cargo.lock

Cargo.tomlå’ŒCargo.lockæ˜¯cargoçš„æ ¸å¿ƒæ–‡ä»¶ï¼Œä¸»è¦æ˜¯åŸºæ–¼å…©è€…:

ğŸª’ Cargo.tomlæ˜¯cargoç‰¹æœ‰çš„é …ç›®æ•¸æ“šæè¿°æ–‡ä»¶ã€‚å®ƒå­˜äº†é …ç›®çš„æ‰€æœ‰åŸé…ç½®ä¿¡æ¯ï¼Œå¦‚æœRusté–‹ç™¼è€…å¸Œæœ›Rusté …ç›®èƒ½å¤ ä¾ç…§æœŸæœ›çš„æ–¹å¼é€²è¡Œå»ºæ§‹,æ¸¬è©¦å’Œé‹è¡Œï¼Œé‚£å¿…é ˆæŒ‰ç…§åˆç†çš„æ–¹å¼æ§‹å»ºCargo.tomlã€‚

ğŸª’ Cargo.lockæ–‡ä»¶æ˜¯cargoå·¥å…·æ ¹æ“šåŒä¸€é …ç›®çš„tomlæ–‡ä»¶ç”Ÿæˆçš„é …ç›®ä¾è³´è©³ç´°æ¸…å–®ï¼Œå› æ­¤æˆ‘å€‘ä¸€èˆ¬ä¸ç”¨ä¿®æ”¹å®ƒï¼Œåªéœ€è¦å°è‘—Cargo.tomlæ–‡ä»¶å°±è¡Œäº†ã€‚

### packageé…ç½®

packageä¸­è¨˜éŒ„äº†é …ç›®çš„æè¿°ä¿¡æ¯å¦‚:

{% highlight rust %}

[package]
name = "world_hello"
version = "0.1.0"
edition = "2021"

{% endhighlight %}

nameå®šç¾©äº†é …ç›®åç¨±ï¼Œversionå®šç¾©ç•¶å‰ç‰ˆæœ¬ï¼Œæ–°é …ç›®æ˜¯0.1.0ï¼Œeditionå­—æ®µå®šç¾©äº†æˆ‘å€‘ä½¿ç”¨çš„Rustå¤§ç‰ˆæœ¬ã€‚

### å®šç¾©é …ç›®ä¾è³´

ä½¿ç”¨cargoå·¥å…·æœ€å¤§å„ªå‹¢åœ¨æ–¼ï¼Œèƒ½å¤ å°è©²é …ç›®çš„å„ç¨®ä¾è³´é …é€²è¡Œæ–¹ä¾¿,çµ±ä¸€å’Œéˆæ´»çš„ç®¡ç†ã€‚

åœ¨Cargo.tomlä¸­ï¼Œä¸»è¦é€šéå„ç¨®ä¾è³´æ®µè½ä¾†æè¿°è©²é …ç›®çš„å„ç¨®ä¾è³´é …:

ğŸ›¡ åŸºæ–¼Rustå®˜æ–¹crates.ioï¼Œé€šéç‰ˆæœ¬ä¾†æ›¸åæè¿°

ğŸ›¡ åŸºæ–¼é …ç›®æºä»£ç¢¼çš„gitï¼Œé€šéurlä¾†æè¿°

ğŸ›¡ åŸºæ–¼æœ¬åœ°é …ç›®çš„çµ•å°è·¯å¾‘æˆ–è€…ç›¸å°è·¯å¾‘ï¼Œé€šéå°Unixæ¨¡å¼è·¯å¾‘ä¾†æè¿°

é€™ä¸‰ç¨®å…·é«”å¯«æ³•:

```
  [dependencies]
    rand = "0.3"
    hammer = { version = "0.5.0"}
    color = { git = "https://github.com/bjz/color-rs" }
    geometry = { path = "crates/geometry" }
```



